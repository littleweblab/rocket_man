///////////
// QUEUE //
///////////  
module.exports = function queue( write, queue ) {
  queue = queue || [];
  var length = queue.length;
  
  function drain ( write, req ) {    
    for ( var i = 0; i < length; ) {
      write = write.apply( undefined, queue[ i++ ] );
    }//END LOOP
//console.log('QUEUE DRAIN',  write )
    return write(); 
  };//END DRAIN
  
  return function read() {
    
    if ( !arguments.length ) return  write ? write( drain ) : drain;

    queue[ length++ ] = arguments;
    return read;
  }//END READ
}//END QUEUE