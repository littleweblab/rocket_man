//!!!!!!!!!!!!!!!!!!!!!!!!!!! TEMPORARY !!!!!!!!!!!!!!!!!
var bif = [ 
    [{"constant":[{"datatype":"constant","status":"view","height":600,"width":600,"groundzeroident":"zero","defaultnodeorientation":"h","levelseperator":".","websiteident":"6VQVVT66_","defaultcontainerheight":100,"designposition":"center"}]},{"rules":[{"datatype":"rules","deltaheightrule":"add","containerheightrule":"fix","identrule":"count","dummy":"nil"}]},{"tree":[{"datatype":"node","ident":"6VQVVT66_0","parentident":"6VQVVT66_","align":"fit","level":0,"levelmarker":".0","height":600,"width":600,"buildorder":"noinfo","rightscrollbar":false,"bottomscrollbar":false,"url":"/zeronode","index":0,"parentindex":0,"parentspin":0},{"datatype":"container","parentident":"6VQVVT66_0","ident":"6VQVVT66_","levelmarker":".0.C1","height":"auto","buildorder":"noinfo","url":"/containers","kind":"Page","attributes":{"width":600,"height":600,"margin-top":"15px","margin-right":"auto","margin-bottom":"15px","margin-left":"auto","background-color":"#ffffff"},"rightscrollbar":false,"fit_height":false,"html":"<div class=\"CONTAINER\"></div>","wrap":"","label":"Page","nature":"Item","text":"","parentspin":0,"options":{"kindSpecials":{}},"relatedcontainer":[]},{"datatype":"container","parentident":"6VQVVT66_0","ident":"STAGE","levelmarker":".0.C2","height":"auto","buildorder":"noinfo","url":"/containers","kind":"Stage","attributes":{"background-color":"#cccccc","background-image":"none","background-attachment":"scroll","background-position":"10px 10px","background-repeat":"no-repeat"},"rightscrollbar":false,"fit_height":false,"html":"<div class=\"CONTAINER\"></div>","wrap":"","label":"Stage","nature":"Item","text":"","parentspin":0,"options":{"kindSpecials":{}},"relatedcontainer":[]},{"datatype":"node","ident":"6VQVVT66_1","parentident":"6VQVVT66_0","containerident":"","align":"top","level":1,"levelmarker":".0.1+T","height":304,"width":600,"buildorder":"BUILD6VQVVT66_","url":"/split","index":1,"parentspin":0},{"datatype":"node","ident":"6VQVVT66_2","parentident":"6VQVVT66_0","containerident":"","align":"bottom","level":1,"levelmarker":".0.1-B","height":296,"width":600,"buildorder":"BUILD6VQVVT66_","url":"/split","index":1,"parentspin":0},{"datatype":"container","parentident":"6VQVVT66_1","ident":"6VQVVT66_3","levelmarker":".0.1+T.C1","height":107,"buildorder":"noinfo","url":"/containers","kind":"Text","attributes":{"background-color":"grey"},"rightscrollbar":false,"fit_height":false,"html":"<div class=\"CONTAINER\"></div>","wrap":"","label":"Container","nature":"Container","text":"","parentindex":1,"parentspin":1,"options":{"kindSpecials":{}},"relatedcontainer":[]},{"datatype":"container","parentident":"6VQVVT66_1","ident":"6VQVVT66_4","levelmarker":".0.1+T.C2","height":229,"buildorder":"noinfo","url":"/containers","kind":"Text","attributes":{"background-color":"pink"},"rightscrollbar":false,"fit_height":false,"html":"<div class=\"CONTAINER\"></div>","wrap":"","label":"Container","nature":"Container","text":"","parentindex":1,"parentspin":1,"options":{"kindSpecials":{}},"relatedcontainer":[]},{"datatype":"container","parentident":"6VQVVT66_1","ident":"6VQVVT66_7","levelmarker":".0.1+T.C3","height":120,"buildorder":"noinfo","url":"/containers","kind":"Text","attributes":{"background-color":"#c9d9e8"},"rightscrollbar":false,"fit_height":false,"html":"<div class=\"CONTAINER\"></div>","wrap":"","label":"Container","nature":"Container","text":"","parentindex":1,"parentspin":1,"options":{"kindSpecials":{}},"relatedcontainer":[]},{"datatype":"container","parentident":"6VQVVT66_2","ident":"6VQVVT66_8","levelmarker":".0.1-B.C1","height":"auto70","buildorder":"noinfo","url":"/containers","kind":"Menu","attributes":{"background-color":"#c9d9e8"},"rightscrollbar":false,"fit_height":false,"html":"<div class=\"CONTAINER\"></div>","wrap":"","label":"Container","nature":"Container","text":"","parentindex":1,"parentspin":-1,"options":{"kindSpecials":{"type":"Vertical","level":"1"}},"relatedcontainer":["6VQVVT66_8-1-1","6VQVVT66_8-1-2","6VQVVT66_8-1-3","6VQVVT66_8-1-4","6VQVVT66_8-1-5","6VQVVT66_8-1-6"]},{"datatype":"container","parentident":"6VQVVT66_2","ident":"6VQVVT66_8-1-1","levelmarker":".0.1-B.C2","height":"auto","buildorder":"noinfo","url":"/containers","kind":"menuItem","attributes":{"margin-top":"20px","margin-right":"0px","margin-bottom":"0px","margin-left":"0px","padding-top":"5px","padding-right":"10px","padding-bottom":"5px","padding-left":"10px","background-color":"#a9b3be","font-family":"Arial, sans-serif","font-size":"14px","font-weight":"bold","font-style":"normal","color":"#ffffff"},"rightscrollbar":false,"fit_height":false,"html":"<a id=\"6VQVVT66_8-1-1\" class=\"ITEM-vertical menuItem\">First 1</a>","wrap":"<li class=\"ITEM-vertical menuItem\"></li>","label":"First 1","nature":"Item","text":"First 1 ","parentindex":1,"parentspin":-1,"options":{"kindSpecials":{}},"relatedcontainer":[]},{"datatype":"container","parentident":"6VQVVT66_2","ident":"6VQVVT66_8-1-2","levelmarker":".0.1-B.C3","height":"auto","buildorder":"noinfo","url":"/containers","kind":"menuItem","attributes":{"margin-top":"1px","margin-right":"0px","margin-bottom":"0px","margin-left":"0px","padding-top":"5px","padding-right":"10px","padding-bottom":"5px","padding-left":"10px","background-color":"#a9b3be","font-family":"Arial, sans-serif","font-size":"14px","font-weight":"bold","font-style":"normal","color":"#ffffff"},"rightscrollbar":false,"fit_height":false,"html":"<a id=\"6VQVVT66_8-1-2\" class=\"ITEM-vertical menuItem\">Default 1</a>","wrap":"<li class=\"ITEM-vertical menuItem\"></li>","label":"Default 1","nature":"Item","text":"Default 1 ","parentindex":1,"parentspin":-1,"options":{"kindSpecials":{}},"relatedcontainer":[]},{"datatype":"container","parentident":"6VQVVT66_2","ident":"6VQVVT66_8-1-3","levelmarker":".0.1-B.C4","height":"auto","buildorder":"noinfo","url":"/containers","kind":"menuItem","attributes":{"margin-top":"0px","margin-right":"0px","margin-bottom":"0px","margin-left":"0px","padding-top":"5px","padding-right":"10px","padding-bottom":"6px","padding-left":"10px","background-color":"#ffffff","font-family":"Arial, sans-serif","font-size":"14px","font-weight":"bold","font-style":"normal","color":"#7a7a7b"},"rightscrollbar":false,"fit_height":false,"html":"<a id=\"6VQVVT66_8-1-3\" class=\"ITEM-vertical menuItem\">Hover 1</a>","wrap":"<li class=\"ITEM-vertical menuItem\"></li>","label":"Hover 1","nature":"Item","text":"Hover 1 ","parentindex":1,"parentspin":-1,"options":{"kindSpecials":{}},"relatedcontainer":[]},{"datatype":"container","parentident":"6VQVVT66_2","ident":"6VQVVT66_8-1-4","levelmarker":".0.1-B.C5","height":"auto","buildorder":"noinfo","url":"/containers","kind":"menuItem","attributes":{"margin-top":"0px","margin-right":"0px","margin-bottom":"0px","margin-left":"0px","padding-top":"5px","padding-right":"10px","padding-bottom":"5px","padding-left":"10px","background-color":"#333334","font-family":"Arial, sans-serif","font-size":"14px","font-weight":"bold","font-style":"normal","color":"#ffffff"},"rightscrollbar":false,"fit_height":false,"html":"<a id=\"6VQVVT66_8-1-4\" class=\"ITEM-vertical menuItem\">Selected 1</a>","wrap":"<li class=\"ITEM-vertical menuItem\"></li>","label":"Selected 1","nature":"Item","text":"Selected 1 ","parentindex":1,"parentspin":-1,"options":{"kindSpecials":{}},"relatedcontainer":[]},{"datatype":"container","parentident":"6VQVVT66_2","ident":"6VQVVT66_8-1-5","levelmarker":".0.1-B.C6","height":"auto","buildorder":"noinfo","url":"/containers","kind":"menuItem","attributes":{"margin-top":"0px","margin-right":"0px","margin-bottom":"0px","margin-left":"0px","padding-top":"5px","padding-right":"10px","padding-bottom":"5px","padding-left":"10px","background-color":"#333334","font-family":"Arial, sans-serif","font-size":"14px","font-weight":"bold","font-style":"normal","color":"#ffffff","border-bottom-color":"#4b4b4c","border-bottom-style":"dotted","border-bottom-width":"2px"},"rightscrollbar":false,"fit_height":false,"html":"<a id=\"6VQVVT66_8-1-5\" class=\"ITEM-vertical menuItem\">Selected with Sub 1</a>","wrap":"<li class=\"ITEM-vertical menuItem\"></li>","label":"Selected with Sub 1","nature":"Item","text":"Selected with Sub 1 ","parentindex":1,"parentspin":-1,"options":{"kindSpecials":{}},"relatedcontainer":[]},{"datatype":"container","parentident":"6VQVVT66_2","ident":"6VQVVT66_8-1-6","levelmarker":".0.1-B.C7","height":"auto","buildorder":"noinfo","url":"/containers","kind":"menuItem","attributes":{"margin-top":"0px","margin-right":"0px","margin-bottom":"20px","margin-left":"0px","padding-top":"5px","padding-right":"10px","padding-bottom":"5px","padding-left":"10px","background-color":"#a9b3be","font-family":"Arial, sans-serif","font-size":"14px","font-weight":"bold","font-style":"normal","color":"#ffffff"},"rightscrollbar":false,"fit_height":false,"html":"<a id=\"6VQVVT66_8-1-6\" class=\"ITEM-vertical menuItem\">Last 1</a>","wrap":"<li class=\"ITEM-vertical menuItem\"></li>","label":"Last 1","nature":"Item","text":"Last 1 ","parentindex":1,"parentspin":-1,"options":{"kindSpecials":{}},"relatedcontainer":[]}]}]
  , [{"constant":[{"datatype":"constant","status":"view","height":"600px","width":"800px","groundzeroident":"zero","defaultnodeorientation":"h","levelseperator":".","websiteident":"4LCNCFED_","defaultcontainerheight":100,"designposition":"center"}]},{"rules":[{"datatype":"rules","deltaheightrule":"add","containerheightrule":"fix","identrule":"count","dummy":"nil"}]},{"tree":[{"datatype":"node","ident":"4LCNCFED_0","parentident":"4LCNCFED_","align":"fit","level":0,"levelmarker":".0","height":600,"width":800,"buildorder":"noinfo","rightscrollbar":false,"bottomscrollbar":false,"url":"/zeronode","index":0,"parentindex":0,"parentspin":0},{"datatype":"container","parentident":"4LCNCFED_0","ident":"4LCNCFED_","levelmarker":"","height":"auto","buildorder":"noinfo","url":"/containers","kind":"Page","attributes":{"width":800,"height":600,"margin-top":"15px","margin-right":"auto","margin-bottom":"15px","margin-left":"auto","background-color":"#ffffff"},"rightscrollbar":false,"fit_height":false,"html":"<div class=\"CONTAINER\"></div>","wrap":"","label":"Page","nature":"Item","text":"","parentspin":0,"options":{"kindSpecials":{}},"relatedcontainer":[]},{"datatype":"container","parentident":"4LCNCFED_0","ident":"STAGE","levelmarker":"","height":"auto","buildorder":"noinfo","url":"/containers","kind":"Stage","attributes":{"background-color":"transparent","background-image":"none","background-attachment":"scroll","background-position":"10px 10px","background-repeat":"no-repeat"},"rightscrollbar":false,"fit_height":false,"html":"<div class=\"CONTAINER\"></div>","wrap":"","label":"Stage","nature":"Item","text":"","parentspin":0,"options":{"kindSpecials":{}},"relatedcontainer":[]},{"datatype":"container","parentident":"4LCNCFED_0","ident":"4LCNCFED_1","levelmarker":".0.C3","height":322,"buildorder":"noinfo","url":"/containers","kind":"Text","attributes":{"background-color":"#c9d9e8"},"rightscrollbar":false,"fit_height":false,"html":"<div class=\"CONTAINER\"></div>","wrap":"","label":"Container","nature":"Container","text":"","parentspin":0,"options":{"kindSpecials":{}},"relatedcontainer":[]}]}]
  , [{"constant":[{"datatype":"constant","status":"view","height":600,"width":600,"groundzeroident":"zero","defaultnodeorientation":"h","levelseperator":".","websiteident":"DGACNE5D_","defaultcontainerheight":100,"designposition":"center"}]},{"rules":[{"datatype":"rules","deltaheightrule":"add","containerheightrule":"fix","identrule":"count","dummy":"nil"}]},{"tree":[{"datatype":"node","ident":"DGACNE5D_0","parentident":"DGACNE5D_","align":"fit","level":0,"levelmarker":".0","height":600,"width":600,"buildorder":"noinfo","rightscrollbar":false,"bottomscrollbar":false,"url":"/zeronode","index":0,"parentindex":0,"parentspin":0},{"datatype":"container","parentident":"DGACNE5D_0","ident":"DGACNE5D_","levelmarker":".0.C1","height":"auto","buildorder":"noinfo","url":"/containers","kind":"Page","attributes":{"width":600,"height":600,"margin-top":"15px","margin-right":"auto","margin-bottom":"15px","margin-left":"auto","background-color":"#ffffff"},"rightscrollbar":false,"fit_height":false,"html":"<div class=\"CONTAINER\"></div>","wrap":"","label":"Page","nature":"Item","text":"","parentspin":0,"options":{"kindSpecials":{}},"relatedcontainer":[]},{"datatype":"container","parentident":"DGACNE5D_0","ident":"STAGE","levelmarker":".0.C2","height":"auto","buildorder":"noinfo","url":"/containers","kind":"Stage","attributes":{"background-color":"pink","background-image":"none","background-attachment":"scroll","background-position":"10px 10px","background-repeat":"no-repeat"},"rightscrollbar":false,"fit_height":false,"html":"<div class=\"CONTAINER\"></div>","wrap":"","label":"Stage","nature":"Item","text":"","parentspin":0,"options":{"kindSpecials":{}},"relatedcontainer":[]},{"datatype":"node","ident":"DGACNE5D_1","parentident":"DGACNE5D_0","containerident":"","align":"left","level":1,"levelmarker":".0.1+L","height":600,"width":422,"buildorder":"BUILDDGACNE5D_","url":"/split","index":1,"parentspin":0},{"datatype":"node","ident":"DGACNE5D_2","parentident":"DGACNE5D_0","containerident":"","align":"right","level":1,"levelmarker":".0.1-R","height":600,"width":178,"buildorder":"BUILDDGACNE5D_","url":"/split","index":1,"parentspin":0},{"datatype":"container","parentident":"DGACNE5D_2","ident":"DGACNE5D_3","levelmarker":".0.1-R.C1","height":600,"buildorder":"noinfo","url":"/containers","kind":"Menu","attributes":{"background-color":"#c9d9e8"},"rightscrollbar":false,"fit_height":true,"html":"<div class=\"CONTAINER\"></div>","wrap":"","label":"Container","nature":"Container","text":"","parentindex":1,"parentspin":-1,"options":{"kindSpecials":{"type":"Vertical","level":"3"}},"relatedcontainer":["DGACNE5D_3-1-1","DGACNE5D_3-1-2","DGACNE5D_3-1-3","DGACNE5D_3-1-4","DGACNE5D_3-1-5","DGACNE5D_3-1-6","DGACNE5D_3-2-1","DGACNE5D_3-2-2","DGACNE5D_3-2-3","DGACNE5D_3-2-4","DGACNE5D_3-2-5","DGACNE5D_3-2-6","DGACNE5D_3-3-1","DGACNE5D_3-3-2","DGACNE5D_3-3-3","DGACNE5D_3-3-4","DGACNE5D_3-3-5","DGACNE5D_3-3-6"]},{"datatype":"container","parentident":"DGACNE5D_2","ident":"DGACNE5D_3-1-1","levelmarker":".0.1-R.C2","height":"auto","buildorder":"noinfo","url":"/containers","kind":"menuItem","attributes":{"margin-top":"20px","margin-right":"0px","margin-bottom":"0px","margin-left":"0px","padding-top":"5px","padding-right":"10px","padding-bottom":"5px","padding-left":"10px","background-color":"#a9b3be","font-family":"Arial, sans-serif","font-size":"14px","font-weight":"bold","font-style":"normal","color":"#ffffff"},"rightscrollbar":false,"fit_height":false,"html":"<a id=\"DGACNE5D_3-1-1\" class=\"ITEM-vertical menuItem\">First 1</a>","wrap":"<li class=\"ITEM-vertical menuItem\"></li>","label":"First 1","nature":"Item","text":"First 1 ","parentindex":1,"parentspin":-1,"options":{"kindSpecials":{}},"relatedcontainer":[]},{"datatype":"container","parentident":"DGACNE5D_2","ident":"DGACNE5D_3-1-2","levelmarker":".0.1-R.C3","height":"auto","buildorder":"noinfo","url":"/containers","kind":"menuItem","attributes":{"margin-top":"1px","margin-right":"0px","margin-bottom":"0px","margin-left":"0px","padding-top":"5px","padding-right":"10px","padding-bottom":"5px","padding-left":"10px","background-color":"#a9b3be","font-family":"Arial, sans-serif","font-size":"14px","font-weight":"bold","font-style":"normal","color":"#ffffff"},"rightscrollbar":false,"fit_height":false,"html":"<a id=\"DGACNE5D_3-1-2\" class=\"ITEM-vertical menuItem\">Default 1</a>","wrap":"<li class=\"ITEM-vertical menuItem\"></li>","label":"Default 1","nature":"Item","text":"Default 1 ","parentindex":1,"parentspin":-1,"options":{"kindSpecials":{}},"relatedcontainer":[]},{"datatype":"container","parentident":"DGACNE5D_2","ident":"DGACNE5D_3-1-3","levelmarker":".0.1-R.C4","height":"auto","buildorder":"noinfo","url":"/containers","kind":"menuItem","attributes":{"margin-top":"0px","margin-right":"0px","margin-bottom":"0px","margin-left":"0px","padding-top":"5px","padding-right":"10px","padding-bottom":"6px","padding-left":"10px","background-color":"#ffffff","font-family":"Arial, sans-serif","font-size":"14px","font-weight":"bold","font-style":"normal","color":"#7a7a7b"},"rightscrollbar":false,"fit_height":false,"html":"<a id=\"DGACNE5D_3-1-3\" class=\"ITEM-vertical menuItem\">Hover 1</a>","wrap":"<li class=\"ITEM-vertical menuItem\"></li>","label":"Hover 1","nature":"Item","text":"Hover 1 ","parentindex":1,"parentspin":-1,"options":{"kindSpecials":{}},"relatedcontainer":[]},{"datatype":"container","parentident":"DGACNE5D_2","ident":"DGACNE5D_3-1-4","levelmarker":".0.1-R.C5","height":"auto","buildorder":"noinfo","url":"/containers","kind":"menuItem","attributes":{"margin-top":"0px","margin-right":"0px","margin-bottom":"0px","margin-left":"0px","padding-top":"5px","padding-right":"10px","padding-bottom":"5px","padding-left":"10px","background-color":"#333334","font-family":"Arial, sans-serif","font-size":"14px","font-weight":"bold","font-style":"normal","color":"#ffffff"},"rightscrollbar":false,"fit_height":false,"html":"<a id=\"DGACNE5D_3-1-4\" class=\"ITEM-vertical menuItem\">Selected 1</a>","wrap":"<li class=\"ITEM-vertical menuItem\"></li>","label":"Selected 1","nature":"Item","text":"Selected 1 ","parentindex":1,"parentspin":-1,"options":{"kindSpecials":{}},"relatedcontainer":[]},{"datatype":"container","parentident":"DGACNE5D_2","ident":"DGACNE5D_3-1-5","levelmarker":".0.1-R.C6","height":"auto","buildorder":"noinfo","url":"/containers","kind":"menuItem","attributes":{"margin-top":"0px","margin-right":"0px","margin-bottom":"0px","margin-left":"0px","padding-top":"5px","padding-right":"10px","padding-bottom":"5px","padding-left":"10px","background-color":"#333334","font-family":"Arial, sans-serif","font-size":"14px","font-weight":"bold","font-style":"normal","color":"#ffffff","border-bottom-color":"#4b4b4c","border-bottom-style":"dotted","border-bottom-width":"2px"},"rightscrollbar":false,"fit_height":false,"html":"<a id=\"DGACNE5D_3-1-5\" class=\"ITEM-vertical menuItem\">Selected with Sub 1</a>","wrap":"<li class=\"ITEM-vertical menuItem\"></li>","label":"Selected with Sub 1","nature":"Item","text":"Selected with Sub 1 ","parentindex":1,"parentspin":-1,"options":{"kindSpecials":{}},"relatedcontainer":[]},{"datatype":"container","parentident":"DGACNE5D_2","ident":"DGACNE5D_3-1-6","levelmarker":".0.1-R.C7","height":"auto","buildorder":"noinfo","url":"/containers","kind":"menuItem","attributes":{"margin-top":"0px","margin-right":"0px","margin-bottom":"20px","margin-left":"0px","padding-top":"5px","padding-right":"10px","padding-bottom":"5px","padding-left":"10px","background-color":"#a9b3be","font-family":"Arial, sans-serif","font-size":"14px","font-weight":"bold","font-style":"normal","color":"#ffffff"},"rightscrollbar":false,"fit_height":false,"html":"<a id=\"DGACNE5D_3-1-6\" class=\"ITEM-vertical menuItem\">Last 1</a>","wrap":"<li class=\"ITEM-vertical menuItem\"></li>","label":"Last 1","nature":"Item","text":"Last 1 ","parentindex":1,"parentspin":-1,"options":{"kindSpecials":{}},"relatedcontainer":[]},{"datatype":"container","parentident":"DGACNE5D_2","ident":"DGACNE5D_3-2-1","levelmarker":".0.1-R.C8","height":"auto","buildorder":"noinfo","url":"/containers","kind":"menuItem","attributes":{"margin-top":"0px","margin-right":"0px","margin-bottom":"0px","margin-left":"0px","padding-top":"5px","padding-right":"10px","padding-bottom":"5px","padding-left":"20px","background-color":"#333334","font-family":"Arial, sans-serif","font-size":"12px","font-weight":"normal","font-style":"normal","color":"#ffffff"},"rightscrollbar":false,"fit_height":false,"html":"<a id=\"DGACNE5D_3-2-1\" class=\"ITEM-vertical menuItem\">First 2</a>","wrap":"<li class=\"ITEM-vertical menuItem\"></li>","label":"First 2","nature":"Item","text":"First 2 ","parentindex":1,"parentspin":-1,"options":{"kindSpecials":{}},"relatedcontainer":[]},{"datatype":"container","parentident":"DGACNE5D_2","ident":"DGACNE5D_3-2-2","levelmarker":".0.1-R.C9","height":"auto","buildorder":"noinfo","url":"/containers","kind":"menuItem","attributes":{"margin-top":"0px","margin-right":"0px","margin-bottom":"0px","margin-left":"0px","padding-top":"5px","padding-right":"10px","padding-bottom":"5px","padding-left":"20px","background-color":"#333334","font-family":"Arial, sans-serif","font-size":"12px","font-weight":"normal","font-style":"normal","color":"#ffffff"},"rightscrollbar":false,"fit_height":false,"html":"<a id=\"DGACNE5D_3-2-2\" class=\"ITEM-vertical menuItem\">Default 2</a>","wrap":"<li class=\"ITEM-vertical menuItem\"></li>","label":"Default 2","nature":"Item","text":"Default 2 ","parentindex":1,"parentspin":-1,"options":{"kindSpecials":{}},"relatedcontainer":[]},{"datatype":"container","parentident":"DGACNE5D_2","ident":"DGACNE5D_3-2-3","levelmarker":".0.1-R.C10","height":"auto","buildorder":"noinfo","url":"/containers","kind":"menuItem","attributes":{"margin-top":"0px","margin-right":"0px","margin-bottom":"0px","margin-left":"0px","padding-top":"5px","padding-right":"10px","padding-bottom":"6px","padding-left":"20px","background-color":"#49494a","font-family":"Arial, sans-serif","font-size":"12px","font-weight":"normal","font-style":"normal","color":"#7a7a7b"},"rightscrollbar":false,"fit_height":false,"html":"<a id=\"DGACNE5D_3-2-3\" class=\"ITEM-vertical menuItem\">Hover 2</a>","wrap":"<li class=\"ITEM-vertical menuItem\"></li>","label":"Hover 2","nature":"Item","text":"Hover 2 ","parentindex":1,"parentspin":-1,"options":{"kindSpecials":{}},"relatedcontainer":[]},{"datatype":"container","parentident":"DGACNE5D_2","ident":"DGACNE5D_3-2-4","levelmarker":".0.1-R.C11","height":"auto","buildorder":"noinfo","url":"/containers","kind":"menuItem","attributes":{"margin-top":"0px","margin-right":"0px","margin-bottom":"0px","margin-left":"0px","padding-top":"5px","padding-right":"10px","padding-bottom":"5px","padding-left":"20px","background-color":"#282828","font-family":"Arial, sans-serif","font-size":"12px","font-weight":"normal","font-style":"normal","color":"#ffffff"},"rightscrollbar":false,"fit_height":false,"html":"<a id=\"DGACNE5D_3-2-4\" class=\"ITEM-vertical menuItem\">Selected 2</a>","wrap":"<li class=\"ITEM-vertical menuItem\"></li>","label":"Selected 2","nature":"Item","text":"Selected 2 ","parentindex":1,"parentspin":-1,"options":{"kindSpecials":{}},"relatedcontainer":[]},{"datatype":"container","parentident":"DGACNE5D_2","ident":"DGACNE5D_3-2-5","levelmarker":".0.1-R.C12","height":"auto","buildorder":"noinfo","url":"/containers","kind":"menuItem","attributes":{"margin-top":"0px","margin-right":"0px","margin-bottom":"0px","margin-left":"0px","padding-top":"5px","padding-right":"10px","padding-bottom":"5px","padding-left":"20px","background-color":"#282828","font-family":"Arial, sans-serif","font-size":"12px","font-weight":"normal","font-style":"normal","color":"#ffffff","border-bottom-color":"#4b4b4c","border-bottom-style":"dotted","border-bottom-width":"1px"},"rightscrollbar":false,"fit_height":false,"html":"<a id=\"DGACNE5D_3-2-5\" class=\"ITEM-vertical menuItem\">Selected with Sub 2</a>","wrap":"<li class=\"ITEM-vertical menuItem\"></li>","label":"Selected with Sub 2","nature":"Item","text":"Selected with Sub 2 ","parentindex":1,"parentspin":-1,"options":{"kindSpecials":{}},"relatedcontainer":[]},{"datatype":"container","parentident":"DGACNE5D_2","ident":"DGACNE5D_3-2-6","levelmarker":".0.1-R.C13","height":"auto","buildorder":"noinfo","url":"/containers","kind":"menuItem","attributes":{"margin-top":"0px","margin-right":"0px","margin-bottom":"0px","margin-left":"0px","padding-top":"5px","padding-right":"10px","padding-bottom":"5px","padding-left":"20px","background-color":"#333334","font-family":"Arial, sans-serif","font-size":"12px","font-weight":"normal","font-style":"normal","color":"#ffffff"},"rightscrollbar":false,"fit_height":false,"html":"<a id=\"DGACNE5D_3-2-6\" class=\"ITEM-vertical menuItem\">Last 2</a>","wrap":"<li class=\"ITEM-vertical menuItem\"></li>","label":"Last 2","nature":"Item","text":"Last 2 ","parentindex":1,"parentspin":-1,"options":{"kindSpecials":{}},"relatedcontainer":[]},{"datatype":"container","parentident":"DGACNE5D_2","ident":"DGACNE5D_3-3-1","levelmarker":".0.1-R.C14","height":"auto","buildorder":"noinfo","url":"/containers","kind":"menuItem","attributes":{"margin-top":"0px","margin-right":"0px","margin-bottom":"0px","margin-left":"0px","padding-top":"5px","padding-right":"10px","padding-bottom":"5px","padding-left":"30px","background-color":"#282828","font-family":"Arial, sans-serif","font-size":"10px","font-weight":"normal","font-style":"normal","color":"#ffffff"},"rightscrollbar":false,"fit_height":false,"html":"<a id=\"DGACNE5D_3-3-1\" class=\"ITEM-vertical menuItem\">First 3</a>","wrap":"<li class=\"ITEM-vertical menuItem\"></li>","label":"First 3","nature":"Item","text":"First 3 ","parentindex":1,"parentspin":-1,"options":{"kindSpecials":{}},"relatedcontainer":[]},{"datatype":"container","parentident":"DGACNE5D_2","ident":"DGACNE5D_3-3-2","levelmarker":".0.1-R.C15","height":"auto","buildorder":"noinfo","url":"/containers","kind":"menuItem","attributes":{"margin-top":"0px","margin-right":"0px","margin-bottom":"0px","margin-left":"0px","padding-top":"5px","padding-right":"10px","padding-bottom":"5px","padding-left":"30px","background-color":"#282828","font-family":"Arial, sans-serif","font-size":"10px","font-weight":"normal","font-style":"normal","color":"#ffffff"},"rightscrollbar":false,"fit_height":false,"html":"<a id=\"DGACNE5D_3-3-2\" class=\"ITEM-vertical menuItem\">Default 3</a>","wrap":"<li class=\"ITEM-vertical menuItem\"></li>","label":"Default 3","nature":"Item","text":"Default 3 ","parentindex":1,"parentspin":-1,"options":{"kindSpecials":{}},"relatedcontainer":[]},{"datatype":"container","parentident":"DGACNE5D_2","ident":"DGACNE5D_3-3-3","levelmarker":".0.1-R.C16","height":"auto","buildorder":"noinfo","url":"/containers","kind":"menuItem","attributes":{"margin-top":"0px","margin-right":"0px","margin-bottom":"0px","margin-left":"0px","padding-top":"5px","padding-right":"10px","padding-bottom":"6px","padding-left":"30px","background-color":"#313131","font-family":"Arial, sans-serif","font-size":"10px","font-weight":"normal","font-style":"normal","color":"#7a7a7b"},"rightscrollbar":false,"fit_height":false,"html":"<a id=\"DGACNE5D_3-3-3\" class=\"ITEM-vertical menuItem\">Hover 3</a>","wrap":"<li class=\"ITEM-vertical menuItem\"></li>","label":"Hover 3","nature":"Item","text":"Hover 3 ","parentindex":1,"parentspin":-1,"options":{"kindSpecials":{}},"relatedcontainer":[]},{"datatype":"container","parentident":"DGACNE5D_2","ident":"DGACNE5D_3-3-4","levelmarker":".0.1-R.C17","height":"auto","buildorder":"noinfo","url":"/containers","kind":"menuItem","attributes":{"margin-top":"0px","margin-right":"0px","margin-bottom":"0px","margin-left":"0px","padding-top":"5px","padding-right":"10px","padding-bottom":"5px","padding-left":"30px","background-color":"#282828","font-family":"Arial, sans-serif","font-size":"10px","font-weight":"normal","font-style":"normal","color":"#ffffff"},"rightscrollbar":false,"fit_height":false,"html":"<a id=\"DGACNE5D_3-3-4\" class=\"ITEM-vertical menuItem\">Selected 3</a>","wrap":"<li class=\"ITEM-vertical menuItem\"></li>","label":"Selected 3","nature":"Item","text":"Selected 3 ","parentindex":1,"parentspin":-1,"options":{"kindSpecials":{}},"relatedcontainer":[]},{"datatype":"container","parentident":"DGACNE5D_2","ident":"DGACNE5D_3-3-5","levelmarker":".0.1-R.C18","height":"auto","buildorder":"noinfo","url":"/containers","kind":"menuItem","attributes":{"margin-top":"0px","margin-right":"0px","margin-bottom":"0px","margin-left":"0px","padding-top":"5px","padding-right":"10px","padding-bottom":"5px","padding-left":"30px","background-color":"#282828","font-family":"Arial, sans-serif","font-size":"10px","font-weight":"normal","font-style":"normal","color":"#ffffff"},"rightscrollbar":false,"fit_height":false,"html":"<a id=\"DGACNE5D_3-3-5\" class=\"ITEM-vertical menuItem\">Selected with Sub 3</a>","wrap":"<li class=\"ITEM-vertical menuItem\"></li>","label":"Selected with Sub 3","nature":"Item","text":"Selected with Sub 3 ","parentindex":1,"parentspin":-1,"options":{"kindSpecials":{}},"relatedcontainer":[]},{"datatype":"container","parentident":"DGACNE5D_2","ident":"DGACNE5D_3-3-6","levelmarker":".0.1-R.C19","height":"auto","buildorder":"noinfo","url":"/containers","kind":"menuItem","attributes":{"margin-top":"0px","margin-right":"0px","margin-bottom":"0px","margin-left":"0px","padding-top":"5px","padding-right":"10px","padding-bottom":"5px","padding-left":"30px","background-color":"#282828","font-family":"Arial, sans-serif","font-size":"10px","font-weight":"normal","font-style":"normal","color":"#ffffff"},"rightscrollbar":false,"fit_height":false,"html":"<a id=\"DGACNE5D_3-3-6\" class=\"ITEM-vertical menuItem\">Last 3</a>","wrap":"<li class=\"ITEM-vertical menuItem\"></li>","label":"Last 3","nature":"Item","text":"Last 3 ","parentindex":1,"parentspin":-1,"options":{"kindSpecials":{}},"relatedcontainer":[]}]}]  
  
  ];
var pages = { 
    'Home': { prev: null, parent: null, design: 'DGACNE5D_' }
  , 'Company': { prev: null, parent:'Home', design: '6VQVVT66_' }
  , 'Products': { prev: 'Company', parent:'Home', design: 'DGACNE5D_' }
  , 'Gradety': { prev: null, parent:'Products', design: '4LCNCFED_' }
  , 'Multiverse': { prev: null, parent:'Products', design: '4LCNCFED_' }
  , 'testx': { prev: null, parent:'Imprint', design: '4LCNCFED_' }
  , 'testxabc': { prev: 'testx', parent:'Imprint', design: '4LCNCFED_' }
  , 'Contact': { prev: 'Products', parent:'Home', design: '6VQVVT66_' }
  , 'Imprint':{ prev: 'Home', parent: null, design: '4LCNCFED_'}
};
//!!!!!!!!!!!!!!!!!!!!!!!!!!! TEMPORARY !!!!!!!!!!!!!!!!!

var toFab = require( './tofab.js' ).toFab
  , toCss = require( './tocss.js' ).toCss
  , querystring = require( 'querystring' )
  ;
//////////////////////////////
// CREATE MASTER STYLESHEET //
//////////////////////////////
//createStylesheet( '/../stylus/static.styl', '/static/css/static.css' );
///////////////////////
// CREATE PSEUDO DOM //
///////////////////////
var pathes = createPath( pages );
var nodes = {}; 

function addNode ( NODE, constant, css ) {
  var TAG = NODE.html ? NODE.html.match( /<(.*?)\s/ )[ 1 ] : 'DIV';
  var CLASS = NODE.html ? NODE.html.match( /class="(.*?)"/ )[ 1 ] : '';
  var HREF = NODE.html ? NODE.html.match( /href="(.*?)"/ ) : null;
  var STYLES = NODE.attributes || {};
  var PARENT = nodes[ constant.websiteident ][ NODE.parentident ] || NODE.parentident; //ID or Obj 
  
  PARENT[ 'childNodes' ].push( nodes[ constant.websiteident ][ 'blank-' + NODE.ident ] = { 'nodeType': 3, 'nodeValue': ' ', 'nodeName':'TEXT' }); //Create Text
      
  STYLES.width = NODE.datatype == 'node' ? NODE.width + 'px' : 'auto';
  STYLES.height = NODE.height + 'px'; 
       
  nodes[ constant.websiteident ][ NODE.ident ] = {};
  nodes[ constant.websiteident ][ NODE.ident ][ 'attributes' ] = [ { name:'class', value:  NODE.datatype == 'node' ? 'GRID' : CLASS } ];
    if ( NODE.ident ) nodes[ constant.websiteident ][ NODE.ident ][ 'attributes' ].push({ name: 'id', value: 'id-' + NODE.ident }); //add id if exists in node
    if ( HREF != null ) nodes[ constant.websiteident ][ NODE.ident ][ 'attributes' ].push({ name: 'href', value: HREF[ 1 ] }); //add href if exist

  nodes[ constant.websiteident ][ NODE.ident ][ 'childNodes' ] = [];
  nodes[ constant.websiteident ][ NODE.ident ][ 'nodeName' ] =  TAG;
  nodes[ constant.websiteident ][ NODE.ident ][ 'nodeType' ] = 1;
  PARENT[ 'childNodes' ].push( nodes[ constant.websiteident ][ NODE.ident ] );
  
  if ( css == true ) nodes[ constant.websiteident ][ constant.websiteident ].stylesheet += toCss( NODE.ident, STYLES, '#id-' );//Extend stylesheet of current design 
  if ( NODE.text )  nodes[ constant.websiteident ][ NODE.ident ][ 'childNodes' ].push( nodes[ constant.websiteident ][ 'text-' + NODE.ident ] = {'nodeType': 3, 'nodeValue': NODE.text, 'nodeName':'TEXT' }); //Create Text
  
  return nodes[ constant.websiteident ][ NODE.ident ];//Return created domObj
};

function findById (id, tree) { for ( var i in tree ) if ( tree[ i ].ident == id  ) return tree[ i ]; };


for ( var design in bif) pseudoDom ( bif[ design ] );

var subMenu = ''

function pseudoDom ( bifork ) {
  var constant = bifork[ 0 ].constant[ 0 ]
    , tree = bifork[ 2 ].tree;
  
  nodes[ constant.websiteident ] = {}
  nodes[ constant.websiteident ][ constant.websiteident ] = { childNodes: [], nodeName: 'DIV', stylesheet:'', attributes: [ { name:'class', value:  'PAGE' } ] };//CREATE ZERO NODE
  /////////////////////////////
  // CREATE DOM PSEUDO nodes //
  /////////////////////////////
  for ( var e in tree ) {
    var NODE = tree[ e ];
    if ( NODE.kind == 'Page' ) nodes[ constant.websiteident ][ constant.websiteident ].stylesheet += toCss( 'PAGE' , NODE.attributes, '.' );
    else if ( NODE.kind == 'Stage' ) nodes[ constant.websiteident ][ constant.websiteident ].stylesheet+= toCss( 'body' , NODE.attributes, '' );
    
    else if ( NODE.kind ==  'Menu' ) {
    
      var container = addNode( NODE, constant, true )//Add container to dom Container 
        , menuType = NODE.options.kindSpecials.type.toLowerCase()
        , menu = addNode({ 
                  parentident: NODE.ident
                , height: '100%'
                , attributes: ''
                , html: '<menu class="FUNCTION-'+  menuType +'"></div>'
                }, constant , false );//Add Menu to dom 
      
      ///////////////////////////
      // FIND HOVER ATTRIBUTES //
      ///////////////////////////
      var hover = []
      for ( var id in NODE.relatedcontainer ) { 
        var menuItem = findById( NODE.relatedcontainer[ id ] ,tree );
        if ( menuItem.label.match( /Hover/ ) != null )  hover.push( menuItem.attributes );         
      };//END LOOP
    
      ////////////////////////////////////////
      // CREATE STYLESHEET CLASSES FOR MENU //
      ////////////////////////////////////////
      for ( var id in NODE.relatedcontainer ) { 
        var menuItem = findById( NODE.relatedcontainer[ id ] ,tree ); 
        if ( menuItem.label.match(/Hover/) == null ) {
         // console.log( menuItem.label.split('').pop() )
          var hoverAttributes =  hover[ menuItem.label.split('').pop() - 1 ]// Get the right hover
            , itemType = 'ITEM-' + NODE.ident +'-'+ menuItem.label.toLowerCase().replace( / /g, '-');//Create label ITEM-id-default
          
          nodes[ constant.websiteident ][ constant.websiteident ].stylesheet+= toCss( itemType, menuItem.attributes, '.' );//Make class
          nodes[ constant.websiteident ][ constant.websiteident ].stylesheet+= toCss( itemType, hoverAttributes , '.', ':hover' );//Make hover
        }//END IF
      }//END LOOP
      ///////////////////////////////////////////////////////
      // RETURNS MENU ON EACH LEVEL OF THE PAGE TREE       //
      // IF IT ALREADY EXIST IN NODES OR IF NOT CREATES IT //
      ///////////////////////////////////////////////////////
      function dealWithMenu ( parent ) {
        var parent = nodes[ constant.websiteident ][parent]
        
        for ( var child in parent.childNodes ) { if ( parent.childNodes[ child ].nodeName == 'menu' ) return parent.childNodes[ child ] }
        return addNode({
                parentident: parent
              , height: 'auto'
              , attributes: ''
              , html: '<menu class="FUNCTION-'+ NODE.options.kindSpecials.type.toLowerCase() +'"></div>'
              }, constant ) 
      }//END DEALWITHMENU
      
      function getStatus( pathes, level, x, xpath ) {
        var last = null
        for ( var path in pathes ) {
          var p = pathes[ path ];
          if ( last == null && p[ level ] ==  x ) return 'first';
          if ( p.slice( 0, level ).join( '' ) == xpath &&  p[ level ] != undefined ) last = p[ level ];
        }
        if ( last == x  ) return 'last';
        else return 'default';
      }
      
      ///////////////////////
      // CREATE MENU ITEMS //
      ///////////////////////
      for ( var path in pathes ) {
        var p = pathes[ path ];
        for ( var level in p ) { 
          var MENU = ( p[ parseInt( level ) - 1 ] !== undefined ? dealWithMenu( p[ level-1 ],  p[ level] ) : menu )
          if ( nodes[ constant.websiteident ][ p[ level ] ] == undefined ) { 
            
            var status = getStatus( pathes, level , p[ level ],  p.slice( 0, level ).join( '' ) )//'default' 
            ///////////////
            // CREATE LI //
            ///////////////            
            var listItem = 
              addNode({
                parentident: MENU
              , html: '<li class="ITEM-' + menuType + '"></li>'
              , ident: p[ level ]
              , attributes: ''
              }, constant, false );
            //////////////
            // CREATE A //
            //////////////
            addNode({
              parentident: listItem
            , html: '<a class=" ITEM-' + NODE.ident + '-' + status  +'-' + ( parseInt( level ) + 1 ) + '" href="/' + p.join('/') + '"></a>'// Crete href html with attributes
            , ident: 'link-' + p[ level ]
            , attributes: ''
            , text: p[ level ] + '-' + status
            }, constant, false );
         }//END IF
        }//END LOOP
      }//END LOOP
    }//END ELSE IF
    
    else if ( NODE.kind == 'menuItem') {}
    else { addNode( NODE, constant, true); };//END IF/ELSE IF/ELSE
  }//END LOOP
}//END PSEUDODOM

///////////////////////////
// PARSE BIF GRID TO FAB //
///////////////////////////
function createGrid ( design ) {
   var fabCode = ''
   fabCode += toFab( nodes[ design ][ design ] )
   return fabCode
}//END CREATEGRID

/////////////////////
// CREATE PATH OBJ //
/////////////////////
function createPath ( pages ) {
  var path = {};
  for ( var page in pages ) {
    var parent = page; 
    path[ page ] = [ page.toLowerCase() ]; 
    while ( parent != null ) {
      if ( pages[ parent ].parent ) path[ page ].unshift( pages[ parent ].parent.toLowerCase() );
      parent = pages[ parent ].parent; 
    }//END LOOP 
  }//END LOOP
  return path;
}//END CREATEPATH

///////////////////////////////
// BRING ALL AS FAB TOGETHER //
///////////////////////////////
function createFabCode ( pathes ) {
  ///////////////////
  // CREATE ROUTES //
  ////////////////////
  var routes = {};
  for ( var path in pathes ) {
    var path =  pathes[ path ]; 
    for ( p in path ) {
      if ( routes[ path[ p ] ] == undefined ) routes[ path[ p ] ] = [ '( route, /' + path[ p ] + '/ )' ];
      if ( routes[ path[ p - 1 ] ] != undefined ) if ( routes[ path[ p - 1 ] ].join('').match(path[ p ]) == null ) routes[ path[ p - 1 ] ].push( routes[ path[ p ] ] );
    }//END LOOP
  }//END LOOP
  ///////////////////////////
  // CREATE PAGES HTML/FAB //
  ///////////////////////////
  for ( var page in pages ) routes[ page.toLowerCase() ].push( 
    "( HTML, { xmlns:'http://www.w3.org/1999/xhtml', 'xml:lang':'de', lang:'de'})"
      + "( HEAD )"
        + "( META , { 'http-equiv':'Content-Type' ,'content':'text/html', 'charset':'utf-8' })"
        + "( LINK , { rel: 'stylesheet', type: 'text/css', href: '/static/css/static.css' })"
        + "( TITLE )( '" + page + "' )()"
        + "( STYLE , { type: 'text/css' })('" + nodes[ pages[ page ].design ][ pages[ page ].design ].stylesheet  + "')()"//Add design specific styles
      + "( /*HEAD*/ )"
      + "( BODY )" 
        + createGrid( pages[ page ].design ) //Add design grid and container
        + "( /*BODY*/ )"
    + "( /*HTML*/ )"
  );//END PUSH
  
  var fabCode  = "( route, /^\\/static/ )( node$fs )( __dirname )( '/static' )( head.url.pathname )( /*fs*/ )( /*route static*/ )";//Add static routes
  for ( var r in routes ) routes[ r ].push( '()' );//Close Routes
  for ( var r in routes ) if ( fabCode.match( r ) == null  ) fabCode += routes[ r ].join('');//Bring all together in one sring
  fabCode = fabCode.replace(/\,\(/g, '(');//Search for , created on join
  
  return fabCode;
}//END CREATEFABCODE
//////////////////////////
// BRING IT TO FRONTEND //
//////////////////////////

var code = createFabCode( pathes );
console.log(code)
require( "fab" )(
  module.exports = function ( exports, imports ) {
    return imports( 
      function ( run, node$listen, node$fs, route, html, head ) { 
        with ( html )
        return eval( 
          'run()'
            + '( node$listen, 4012 )'
              + code 
            + '()'
            + '( "Not found.", { status: 404 } )()' 
        );//END EVAL
      }//END FUNCTION
    );//END IMPORTS
});//END FAB